# Инструкции по настройке деплоя на iOperator.ai

## Шаг 1: Настройка GitHub Pages в репозитории

1. Перейдите в репозиторий: https://github.com/st-VALVe/iOperator_website
2. Откройте **Settings** (Настройки)
3. В левом меню выберите **Pages**
4. В разделе **Source** (Источник):
   - Выберите **GitHub Actions** как источник деплоя
   - Или выберите ветку **gh-pages** (если используется старый метод)
5. В разделе **Custom domain** (Кастомный домен):
   - Введите: `iOperator.ai`
   - Нажмите **Save**
6. GitHub автоматически создаст коммит с CNAME файлом (если его еще нет)

## Шаг 2: Настройка DNS записей для домена iOperator.ai (Hostinger)

### Текущие настройки в Hostinger

Вам нужно изменить следующие записи в панели управления DNS Hostinger:

### 1. Изменить A запись для apex domain (@)

**Удалите текущую A запись:**
- Тип: A
- Имя: @
- Значение: 84.32.84.32 (удалить эту запись)

**Добавьте 4 новые A записи для GitHub Pages:**

Запись 1:
- Тип: **A**
- Имя: **@**
- Priority: **0** (или оставьте пустым)
- Content: **185.199.108.153**
- TTL: **300** (или 3600)

Запись 2:
- Тип: **A**
- Имя: **@**
- Priority: **0**
- Content: **185.199.109.153**
- TTL: **300**

Запись 3:
- Тип: **A**
- Имя: **@**
- Priority: **0**
- Content: **185.199.110.153**
- TTL: **300**

Запись 4:
- Тип: **A**
- Имя: **@**
- Priority: **0**
- Content: **185.199.111.153**
- TTL: **300**

### 2. Изменить CNAME запись для www поддомена

**Измените существующую CNAME запись:**
- Тип: **CNAME**
- Имя: **www**
- Priority: **0**
- Content: **st-VALVe.github.io** (измените с `ioperator.ai` на `st-VALVe.github.io`)
- TTL: **300**

### 3. CAA записи (оставить как есть)

Все CAA записи можно оставить без изменений - они нужны для SSL сертификатов.

### Итоговые DNS записи должны быть:

```
A       @       0       185.199.108.153    300
A       @       0       185.199.109.153    300
A       @       0       185.199.110.153    300
A       @       0       185.199.111.153    300
CNAME   www     0       st-VALVe.github.io  300
CAA     @       0       (все существующие CAA записи)
```

## Шаг 3: Проверка деплоя

1. После настройки DNS подождите 10-60 минут для распространения изменений
2. Проверьте статус деплоя в репозитории:
   - Перейдите на вкладку **Actions**
   - Убедитесь, что workflow "Deploy to GitHub Pages" выполнился успешно
3. Проверьте доступность сайта:
   - Откройте https://iOperator.ai в браузере
   - Или проверьте через https://www.whatsmydns.net/

## Шаг 4: Включение HTTPS (автоматически)

GitHub Pages автоматически предоставляет SSL сертификат для кастомных доменов через Let's Encrypt. После настройки DNS и проверки домена, HTTPS будет включен автоматически в течение нескольких часов.

## Настройка Dev-окружения для параллельной разработки

Для разработки новой версии сайта без влияния на production можно использовать отдельное dev-окружение на поддомене `dev.ioperator.ai`.

### Шаг 1: Создание ветки dev

Ветка `dev` уже создана в репозитории. Если нужно создать заново:

```bash
git checkout -b dev
git push -u origin dev
```

### Шаг 2: Настройка GitHub Pages Environment для dev

1. Перейдите в репозиторий: https://github.com/st-VALVe/iOperator_website
2. Откройте **Settings** (Настройки)
3. В левом меню выберите **Pages**
4. В разделе **Environments** нажмите **New environment**
5. Введите имя: `github-pages-dev`
6. Нажмите **Configure environment**
7. В разделе **Deployment branches**:
   - Выберите **Selected branches**
   - Введите `dev` в поле для веток
8. Нажмите **Save**

### Шаг 3: Настройка DNS для поддомена dev (Hostinger)

Добавьте CNAME запись для поддомена `dev`:

- Тип: **CNAME**
- Имя: **dev**
- Priority: **0** (или оставьте пустым)
- Content: **st-VALVe.github.io**
- TTL: **300** (или 3600)

### Шаг 4: Проверка dev-окружения

1. После настройки DNS подождите 10-60 минут для распространения изменений
2. Проверьте статус деплоя в репозитории:
   - Перейдите на вкладку **Actions**
   - Убедитесь, что workflow "Deploy Dev to GitHub Pages" выполнился успешно
3. Проверьте доступность dev-сайта:
   - Откройте https://dev.ioperator.ai в браузере
   - Или проверьте через https://www.whatsmydns.net/#CNAME/dev.ioperator.ai

### Workflow разработки

1. **Работа над новой версией в ветке dev**:
   ```bash
   git checkout dev
   # ... делаете изменения ...
   git add .
   git commit -m "New features"
   git push origin dev
   # Автоматически деплоится на dev.ioperator.ai
   ```

2. **Когда версия готова, мержите в main**:
   ```bash
   git checkout main
   git merge dev
   git push origin main
   # Автоматически деплоится на ioperator.ai
   ```

### Итоговые DNS записи (включая dev)

```
A       @       0       185.199.108.153    300
A       @       0       185.199.109.153    300
A       @       0       185.199.110.153    300
A       @       0       185.199.111.153    300
CNAME   www     0       st-VALVe.github.io  300
CNAME   dev     0       st-VALVe.github.io  300
CAA     @       0       (все существующие CAA записи)
```

## Важные замечания

- **DNS провайдер**: Hostinger.com
- **Время распространения DNS**: Изменения DNS могут занять от 10 минут до 48 часов (обычно 10-30 минут)
- **Проверка**: После настройки DNS используйте:
  - Онлайн-инструмент: https://www.whatsmydns.net/#A/iOperator.ai
  - Или команду: `nslookup iOperator.ai`
  - Убедитесь, что возвращаются IP адреса GitHub Pages (185.199.108.x - 185.199.111.x)

## Автоматический деплой

После настройки:
- **Production**: каждый раз когда вы делаете `git push` в ветку `main`, сайт автоматически пересоберется и задеплоится на `ioperator.ai`
- **Development**: каждый раз когда вы делаете `git push` в ветку `dev`, сайт автоматически пересоберется и задеплоится на `dev.ioperator.ai`

## Поддержка

Если возникнут проблемы:
1. Проверьте логи в GitHub Actions
2. Убедитесь, что DNS записи настроены правильно
3. Проверьте, что домен указан в настройках GitHub Pages

